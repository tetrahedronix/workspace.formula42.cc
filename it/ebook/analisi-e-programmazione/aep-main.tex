\documentclass[12pt,a4paper,titlepage]{book}
\usepackage[utf8]{inputenc}
\usepackage[italian]{babel}
\usepackage{lmodern}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
% Theorems package
\usepackage{amsthm}
% The empheq package can best be described as a visual markup extension to amsmath
\usepackage{empheq}
% Unlike the default \not command, the symbol is horizontally centered
\usepackage{centernot}
\usepackage{makeidx}
% For beautiful letters drawn by Hermann Zapf
\usepackage{eucal}
% Graphic packages
\usepackage{tikz}
\usepackage{graphicx}
% Generate cartesian plane system
\usepackage{pgfplots}
\usepackage{mathtools}
\usepackage{imakeidx}
\usepackage{enumerate}
% The package enhances the quality of tables
\usepackage{booktabs}
% This package provides advanced facilities for inline and display quotations
\usepackage{csquotes}
% The package provides an easy and flexible user interface to customize page layout
\usepackage[a4paper,left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
% This package provides an environment for coloured and framed text boxes with a heading line
\usepackage[listings,theorems,skins,most]{tcolorbox}
\usepackage[makeroom]{cancel}
% Qed black square
\renewcommand\qedsymbol{$\blacksquare$}
% Fancy Header
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{}
\fancyhead[RE,LO]{\rightmark}
\fancyfoot[LE,RO]{\thepage}
\renewcommand{\headrulewidth}{2pt}
\renewcommand{\footrulewidth}{1pt}
%--------------------------------------
% Redefine the symbol used for itemize
\renewcommand\labelitemi{\rule[0.5mm]{2mm}{2mm}}
\setlength{\headheight}{15pt}
% Dimostrazione su nuovo paragrafo senza identazione
\renewenvironment{proof}{{\bfseries\raggedright Dimostrazione}\vspace{0.4cm}\par\noindent\ignorespaces}{\hfill$\blacksquare$\vspace{0.4cm}}
% Teorema, Lemma, Corollario, Proposizione
\newtheorem*{theorem*}{Teorema}
\newtheorem{theorem}{Teorema}
\numberwithin{theorem}{section}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corll}[theorem]{Corollario}
\newtheorem{prop}[theorem]{Proposizione}
% numparens group for Osservazioni/Osservazione
\newtheoremstyle{numparens}%
  {}% space above
  {0.4cm}% space below
  {}% body font
  {}% indent amount
  {\bfseries}% theorem head font
  {\vspace{0.3cm}}% punctuation after theorem head
  {\newline}% space after theorem head
  {\thmname{#1}~\thmnumber{#2}~\thmnote{#3}}% theorem head spec
\theoremstyle{numparens}
% Osservazione
\newtheorem{remarks}[theorem]{\textbf{Osservazioni}}
\newtheorem{remark}[theorem]{\textbf{Osservazione}}
% Esempio
% break group
\newtheoremstyle{break}
  {0.8cm}% space above
  {0.8cm}% space below
  {}% body font
  {}% indent amount
  {\bfseries}% theorem head font
  {\vspace{0.3cm}}% punctuation after theorem head
  {\newline}% Space after thm head: \newline = linebreak
  {\thmname{#1}~\thmnumber{#2}~\thmnote{{--\normalfont\ #3}}}%         Thm head spec  
\theoremstyle{break}
% Esempio
\newtheorem{example}[theorem]{Esempio}
% Controesempio
\newtheorem{cexample}[theorem]{Controesempio}
% Complemento
\newtheorem{complem}[theorem]{Complemento}
% Change the type of equation numbering to section
%\numberwithin{equation}{section}
% Only this numbered equation
\newcommand\numthis{\addtocounter{equation}{1}\tag{\theequation}}
% Funzione sign
\DeclareMathOperator{\sgn}{sign}
% Importante
\newtcolorbox{marked}{
  colback=black!5!white,
  colframe=gray!75!black,
  before skip=12pt,
  after skip=12pt}
% Definizione in una box
\newtcbtheorem[use counter*=theorem]{defin}{Definizione}{%
%\newtcbtheorem[auto counter, number within=section]{defin}{Definizione}{%
  lower separated=false,
  colback=white,
  colframe=black,fonttitle=\bfseries,
  colbacktitle=black,
  coltitle=white,
  title=Definizione~\thetcbcounter #2,#1,
  enhanced,
%  before skip=8pt plus 2pt,
%  after skip=8pt plus 2pt,
  attach boxed title to top left={yshift=-0.1in,xshift=0.15in},
  boxed title style={boxrule=0pt,colframe=white,},
}{prop}
%--------------------------------------
% Biblatex citation styles
\usepackage[
backend=biber,
style=alphabetic,
sorting=ynt,
citestyle=authoryear
]{biblatex}
\addbibresource{aep.bib}
\author{Giulio Carlo}
\date{}
\title{\huge{\textbf{Analisi}} \\
\vspace{0.5cm}
\textbf{e} \\
\vspace{0.5cm}
\huge{\textbf{Programmazione}}}
% Indici
\makeindex[columns=2, title=Indice analitico, intoc, options=-s Matematica_del_Continuo_Al_Calcolat>
\makeindex[name=theorems, columns=2, title=Indice teoremi, intoc]
\makeindex[name=figures, columns=1, title=Indice figure, intoc]
\makeindex[name=symbols, columns=1, title=Indice figure, intoc]
\usepackage[hidelinks]{hyperref}
\hypersetup{colorlinks,
           citecolor=black,
           filecolor=black,
           linkcolor=black,
           urlcolor=black,
           bookmarksopen=true,
%           pdftex
}
\hfuzz = .6pt % avoid black boxes
\begin{document}
\maketitle
\frontmatter
\section*{Prefazione}
\addcontentsline{toc}{section}{\textbf{Prefazione}}
\newpage
\section*{Avvertenze}
\addcontentsline{toc}{section}{\textbf{Avvertenze}}
Questo libro è risultato molto meno rigoroso e preciso di quanto un matematico pretenderebbe da un testo accademico. Si è cercato di esporre gli argomenti tipici di un insegnamento universitario di Analisi I nella maniera più semplice possibile per renderlo fruibile a un pubblico più ampio; il lavoro è stato svolto da uno studente senza la pretesa di sostituire i libri autorevoli e i materiali didattici consigliati nei corsi di studio di matematica. Pertanto il lettore è invitato, se ne ha la pazienza, a confrontare sempre i ragionamenti, le definizioni, i teoremi esposti in Matematica del Continuo al Calcolatore, capitolo dopo capitolo, con quelli presentati dagli autori più competenti in altre opere. A tal proposito nel presente libro è fornita un'ampia bibliografia,
\newpage
\setcounter{tocdepth}{1}
\tableofcontents
\mainmatter
\include{aep-cap1}
\include{aep-cap2}
\appendix
\include{aep-app1}
\include{aep-app3}
\printbibliography[heading=bibintoc]
%\printindex
%\printindex[theorems]
%\printindex[symbols]
%\printindex[figures]
\end{document}